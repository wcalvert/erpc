# Unit Test Framework #

These unit tests are setup to run on the local host system using a the ceedling test framework (CMock, Unity, etc.).  The tests are compiled into standard binary executables and run on the local host, and where required to actual HW is simulated via CMock.

This document will be expanded with a proper tutorial later, including installation tips for the unit testing framework (this test framework uses Ruby 1.9.3, rake, ceedling, and mingw to build if you are using Windows).

## Running the Tests##

If you are using Eclipse/LPCXpresso for your IDE, you simply need to open the 'Make Target' window and double click on 'test' and Eclipse will build the test binaries for you and run them.  Make sure you've selected 'Unit Tests' are your target build config before doing this or the build process will fail!

If you are not using Eclipse, you can manually run the tests from the command line with the following command:
```
cd test_hosts
rake test:all
```
Which should give you something similar to the following output:
```
	Test 'test_fifo.c'
	------------------
	Generating dependencies for test_fifo.c...
	Generating dependencies for fifo.c...
	Generating dependencies for unity.c...
	Compiling test_fifo_runner.c...
	Compiling test_fifo.c...
	Compiling fifo.c...
	Compiling unity.c...
	Compiling CException.c...
	Compiling cmock.c...
	Linking test_fifo.exe...
	Running test_fifo.exe...
	
	
	Test 'test_fixed.c'
	-------------------
	Generating dependencies for test_fixed.c...
	Compiling test_fixed_runner.c...
	Compiling test_fixed.c...
	Linking test_fixed.exe...
	Running test_fixed.exe...
	
	
	Test 'test_iir.c'
	-----------------
	Generating dependencies for test_iir.c...
	Generating dependencies for iir_f.c...
	Compiling test_iir_runner.c...
	Compiling test_iir.c...
	Compiling iir_f.c...
	Linking test_iir.exe...
	Running test_iir.exe...
	
	
	Test 'test_rtc.c'
	-----------------
	Generating dependencies for test_rtc.c...
	Generating dependencies for rtc.c...
	Compiling test_rtc_runner.c...
	Compiling test_rtc.c...
	Compiling rtc.c...
	Linking test_rtc.exe...
	Running test_rtc.exe...
	
	
	Test 'test_sma.c'
	-----------------
	Generating dependencies for test_sma.c...
	Generating dependencies for sma_f.c...
	Compiling test_sma_runner.c...
	Compiling test_sma.c...
	Compiling sma_f.c...
	Linking test_sma.exe...
	Running test_sma.exe...
	
	
	Test 'test_protocol.c'
	----------------------
	Generating dependencies for test_protocol.c...
	Generating dependencies for mock_board.c...
	Generating dependencies for mock_protocol_callback.c...
	Generating dependencies for mock_usb_custom_class.c...
	Generating dependencies for mock_usb_hid.c...
	Generating dependencies for protocol.c...
	Generating dependencies for protocol_cmd_led.c...
	Compiling test_protocol_runner.c...
	Compiling test_protocol.c...
	Compiling mock_board.c...
	Compiling mock_protocol_callback.c...
	Compiling mock_usb_custom_class.c...
	Compiling mock_usb_hid.c...
	Compiling protocol.c...
	Compiling protocol_cmd_led.c...
	Linking test_protocol.exe...
	Running test_protocol.exe...
	
	
	Test 'test_protocol_cmd_led.c'
	------------------------------
	Generating dependencies for test_protocol_cmd_led.c...
	Compiling test_protocol_cmd_led_runner.c...
	Compiling test_protocol_cmd_led.c...
	Linking test_protocol_cmd_led.exe...
	Running test_protocol_cmd_led.exe...
	
	
	-------------------------
	OVERALL UNIT TEST SUMMARY
	-------------------------
	TESTED:  40
	PASSED:  40
	FAILED:   0
	IGNORED:  0
```
